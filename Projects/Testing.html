<!DOCTYPE html>
<HTML>
  <HEAD>
    <TITLE>Michael Cummins Compiler Project</TITLE>
    <LINK rel="stylesheet" type="text/css" href="myStyle.css" />
	<script type = text/javascript>
        
        var tokens = "";
        var tokenIndex = 0;
        var currentToken = "";
        var numErrors = 0;
        var EOF = "$";
        var currentProgram = 0;
        var completedPrograms = 0;

        
        function init(){
            document.getElementById("CompiledCodeOutput").value = "";
            tokens = "";
            tokenIndex = 0;
            currentToken = ' ';
            numErrors = 0;
            EOF = "$";
            currentProgram = 0;
            completedPrograms = 0;
        }
        
        function createTokens(){
            var code = document.getElementById("SourceCodeInput").value;
            return code;
        }
        
        
        
        function clickTheButton(){
            init();
       //     tokens = getSourceCode();
            outputMessage("Lex Returned [ " + tokens + " ]");
            parse();
        }
        function trim(str){
            return str.replace(/\s/g, "");
        }
        
        function getSourceCode(){
            var sourceCode = document.getElementById("SourceCodeInput").value;
            return sourceCode;
        }
        
        function parse(){
        //    currentToken = getNextToken();
            newLex(getSourceCode);
            outputMessage("Parsing found " + numErrors + " error(s).");
        }
        
        function newLex(userInput){
            var lines = userInput.toString().split("\n");
            var line;
            
            for(var currentLine = 0; currentLine > lines.length; currentLine++){
                line = lines[currentLine];
                for(var column = 0; column < line.length; column++){
                    if(currentProgram != completedPrograms){
                        outputMessage("Lexing program " + currentProgram + "...");
                        completedPrograms++;
                    }
                    currentToken = line[column];
                    if(currentToken == "p"){
                        outputMessage("It worked its just p");
                    }else{
                        outputMessage("You shouldnt be seeing this");
                    }
                }
            }
        }
        
        function addToken(kind, value, line, column){
            var tempToken = new Token(type, value, line, column);
            outputMessage("DEBUG Lexer - " + type + "[" + value + "] found at" + line + "," + column);
            tokens.push(tempToken);
        }
  /*      function lex(){
            if(currentToken != EOF){
                if(currentToken == "p"){
                    if(getNextToken() == "r" && getNextToken() == "i" && getNextToken() == "n" && getNextToken() == "t"){
                        outputMessage("INFO Lexer - PrintStatement [ PRINT ] found at " + tokenIndex);
                        
                    }else{
                        outputMessage("INFO Lexer - ID [ p ] found at " + tokenIndex);
                        
//                        tokenIndex += tokens[currentToken];
                    }
                }
                
                if(currentToken == "i"){
                    if(getNextToken() == "n" && getNextToken() == "t"){
                        outputMessage("INFO Lexer - I_TYPE [int] found at " + tokenIndex);
                        
                    }else if(getNextToken() == "f"){
                        outputMessage("INFO Lexer - If_Statement [if] found at " + tokenIndex);
                        
                    }else{
                        outputMessage("INFO Lexer - ID [i] found at " + tokenIndex);
                        
                    }
                }
            }else{
                outputMessage("Parse done");
            }
        }*/
        
        function outputMessage(message){
            document.getElementById("CompiledCodeOutput").value += message + "\n";
        }
        
        function getNextToken(){
            var thisToken = EOF;
            if (tokenIndex < tokens.length){
                thisToken = tokens[tokenIndex];
                tokenIndex++;
            }
            return thisToken;
        }
        
        
  
         
        
	</script>
  </HEAD>
  <BODY onload = "init();">
    <h1>Cummins Compiler</h1>
    <DIV class="center">
    <TEXTAREA id="SourceCodeInput" rows="30" cols="50"></TEXTAREA>  
    <TEXTAREA id="CompiledCodeOutput" rows="30" cols="50" readonly></TEXTAREA></br>
	<INPUT type="button" id="CompileThis" value="Compile Code" onclick="clickTheButton();" />
	</DIV>
  </BODY>
</HTML>